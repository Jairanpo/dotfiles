#!/usr/bin/env bash

# Define the base directory for all projects
# OS: /home/jair/workspace/client-name/workspace/repos
# VAGRANT: /home/vagrant/workspace/repos/invagrant-example/main
PATHS=(
  "$HOME/workspace/*/workspace/repos"
  "$HOME/workspace/repos"
)

SEARCH_PATTERNS=(
  "*/main"
  "*/master"
  "*/develop"
  "*/feature/*"
  "*/feat/*"
  "*/fix/*"
)

IGNORE_DIRS=(
  ".git"
  "node_modules"
  "target"
  "dist"
  "build"
  ".idea"
  ".vscode"
  "worktree"
)

args=("(")
first=true
for pattern in "${SEARCH_PATTERNS[@]}"; do
  echo $pattern
  if [ "$first" = true ]; then
    first=false
  else
    args+=("-o")
  fi
  args+=("-path")
  args+=("$pattern")
done

args+=( \) )


selected=$(find "${PATHS[@]}" -maxdepth 3 -type d "${args[@]}" 2> /dev/null | fzf)
